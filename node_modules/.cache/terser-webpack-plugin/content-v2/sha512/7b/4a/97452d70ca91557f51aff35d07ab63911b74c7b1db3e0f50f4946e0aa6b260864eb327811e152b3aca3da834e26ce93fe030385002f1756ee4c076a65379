{"code":"webpackHotUpdate(0,{18:function(e,t,n){\"use strict\";var o=n(6),a=n(22),i=n(163),s=n(112);var r=[{path:\"/article\",component:s.a,name:\"Article\",meta:{title:\"文章管理\",icon:\"admin\"},children:[{path:\"list\",component:()=>n.e(4).then(n.bind(null,821)),name:\"Article List\",meta:{title:\"文章列表\",icon:\"admin\"}},{path:\"edit\",component:()=>n.e(3).then(n.bind(null,822)),name:\"Articl Edit\",meta:{title:\"文章管理\",icon:\"admin\",roles:[\"admin\"]}}]},{path:\"/permission\",component:s.a,children:[{path:\"role\",component:()=>n.e(6).then(n.bind(null,823)),name:\"permission Role\",meta:{title:\"角色权限\",icon:\"admin\"}}]}];var c={namespaced:!0,state:{addRoutes:[],routes:[]},mutations:{SET_ROUTES:(e,t)=>{e.addRoutes=t,e.routes=i.a.concat(t)}},actions:{generateRoutes:({commit:e},t)=>new Promise(n=>{let o;o=t.includes(\"admin\")?r||[]:function e(t,n){const o=[];return t.forEach(t=>{const a={...t};(function(e,t){return!t.meta||!t.meta.roles||e.some(e=>t.meta.roles.includes(e))})(n,a)&&(a.children&&(a.children=e(a.children,n)),o.push(a))}),o}(r,t),e(\"SET_ROUTES\",o),n(o)})}},m=n(36),d=n(37);var E={namespaced:!0,state:{token:Object(m.a)(),name:\"\",avatar:\"\",introduction:\"\",roles:[]},mutations:{SET_TOKEN:(e,t)=>{e.token=t},SET_INTRODUCTION:(e,t)=>{e.introduction=t},SET_NAME:(e,t)=>{e.name=t},SET_AVATAR:(e,t)=>{e.avatar=t},SET_ROLES:(e,t)=>{e.roles=t}},actions:{login:({commit:e},t)=>new Promise((n,o)=>{const{userName:a}=t;console.log(\"admin\"==a.trim().toUpperCase()),\"admin\"==a.trim().toUpperCase()?(e(\"SET_ROLES\",[\"admin\"]),e(\"SET_TOKEN\",\"admin\"),Object(m.c)(\"admin\")):(e(\"SET_ROLES\",[\"editor\"]),e(\"SET_TOKEN\",\"editor\"),Object(m.c)(\"editor\")),n()}),getInfo:({commit:e,state:t})=>new Promise((n,o)=>{e(\"SET_NAME\",\"name\"),e(\"SET_AVATAR\",\"avatar\"),e(\"SET_INTRODUCTION\",\"introduction\"),console.log(t.roles),n(t.roles)}),resetToken:({commit:e})=>new Promise(t=>{e(\"SET_TOKEN\",\"\"),e(\"SET_ROLES\",[]),Object(m.b)(),t()}),logout:({commit:e,state:t,dispatch:n})=>new Promise((t,n)=>{e(\"SET_TOKEN\",\"\"),e(\"SET_ROLES\",[]),Object(m.b)(),Object(d.b)(),t()}),async changeRoles({commit:e,dispatch:t},n){const o=n.join(\"\");e(\"SET_ROLES\",n),e(\"SET_TOKEN\",o),Object(m.c)(o),Object(d.b)();const a=await t(\"permission/generateRoutes\",n,{root:!0});d.a.addRoutes(a)}}};var l={namespaced:!0,state:{sidebar:{opened:!0},device:\"pc\"},actions:{toggleSideBar({commit:e}){e(\"TOGGLE_SIDEBAR\")},setSiderBar({commit:e},t){e(\"SET_SIDEBAR\",t)},setDevice({commit:e},t){e(\"SET_DEVICE\",t)}},mutations:{TOGGLE_SIDEBAR:e=>{e.sidebar.opened=!e.sidebar.opened},SET_SIDEBAR:(e,t)=>{e.sidebar.opened=t},SET_DEVICE:(e,t)=>{e.device=t}}};var T={sidebar:e=>e.app.sidebar,device:e=>e.app.device,token:e=>e.user.token,avatar:e=>e.user.avatar,name:e=>e.user.name,introduction:e=>e.user.introduction,roles:e=>e.user.roles,permission_routes:e=>e.permission.routes};o.default.use(a.a);const u=new a.a.Store({modules:{permission:c,user:E,app:l},getters:T});t.a=u}});","extractedComments":[]}