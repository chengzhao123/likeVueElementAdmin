{"code":"webpackHotUpdate(1,{162:function(e,t,a){\"use strict\";const n=[{path:\"/login\",component:()=>a.e(6).then(a.bind(null,769)),hidden:!0},{path:\"/\",redirect:\"/dashBoard\",component:a(91).a,children:[{path:\"dashBoard\",component:()=>a.e(11).then(a.bind(null,770)),name:\"Dashboard\",meta:{title:\"首页\",icon:\"admin\"}}]},{path:\"/404\",component:()=>a.e(9).then(a.bind(null,771)),hidden:!0}];t.a=n},22:function(e,t,a){\"use strict\";var n=a(5),o=a(20),i=a(162),s=a(91);var r=[{path:\"/article\",component:s.a,name:\"Article\",meta:{title:\"文章管理\",icon:\"admin\"},children:[{path:\"list\",component:()=>a.e(8).then(a.bind(null,969)),name:\"Article List\",meta:{title:\"文章列表\",icon:\"admin\"}},{path:\"edit\",component:()=>a.e(7).then(a.bind(null,970)),name:\"Articl Edit\",meta:{title:\"文章管理\",icon:\"admin\",roles:[\"admin\"]}}]},{path:\"/permission\",component:s.a,meta:{roles:[\"admin\"]},children:[{path:\"role\",component:()=>a.e(10).then(a.bind(null,971)),name:\"permission Role\",meta:{title:\"角色权限\",icon:\"admin\"}}]},{path:\"/localtion\",component:s.a,meta:{title:\"地图管理\",icon:\"admin\"},children:[{path:\"cesium\",component:()=>Promise.all([a.e(0),a.e(2)]).then(a.bind(null,972)),name:\"CesiumDemo\",meta:{title:\"Cesium地图\",icon:\"admin\"}}]},{path:\"*\",redirect:\"/404\",hidden:!0}];var c={namespaced:!0,state:{addRoutes:[],routes:[]},mutations:{SET_ROUTES:(e,t)=>{e.addRoutes=t,e.routes=i.a.concat(t)}},actions:{generateRoutes:({commit:e},t)=>new Promise(a=>{let n;n=t.includes(\"admin\")?r||[]:function e(t,a){const n=[];return t.forEach(t=>{const o={...t};(function(e,t){return!t.meta||!t.meta.roles||e.some(e=>t.meta.roles.includes(e))})(a,o)&&(o.children&&(o.children=e(o.children,a)),n.push(o))}),n}(r,t),e(\"SET_ROUTES\",n),a(n)})}},d=a(40),m=a(35);var l={namespaced:!0,state:{token:Object(d.a)(),name:\"\",avatar:\"\",introduction:\"\",roles:[]},mutations:{SET_TOKEN:(e,t)=>{e.token=t},SET_INTRODUCTION:(e,t)=>{e.introduction=t},SET_NAME:(e,t)=>{e.name=t},SET_AVATAR:(e,t)=>{e.avatar=t},SET_ROLES:(e,t)=>{e.roles=t}},actions:{login:({commit:e},t)=>new Promise((a,n)=>{const{userName:o}=t;let i=\"\";i=\"admin\"==o.trim().toLowerCase()?\"admin\":\"editor\",e(\"SET_TOKEN\",i),Object(d.c)(i),a()}),getInfo:({commit:e,state:t})=>new Promise((a,n)=>{\"admin\"==Object(d.a)()?e(\"SET_ROLES\",[\"admin\"]):e(\"SET_ROLES\",[\"editor\"]),e(\"SET_NAME\",\"name\"),e(\"SET_AVATAR\",\"avatar\"),e(\"SET_INTRODUCTION\",\"introduction\"),a(t.roles)}),resetToken:({commit:e})=>new Promise(t=>{e(\"SET_TOKEN\",\"\"),e(\"SET_ROLES\",[]),Object(d.b)(),t()}),logout:({commit:e,state:t,dispatch:a})=>new Promise((t,a)=>{document.getElementsByClassName(\"audioTag\").length>0&&document.getElementById(\"app\").removeChild(document.getElementsByClassName(\"audioTag\")[0]),e(\"SET_TOKEN\",\"\"),e(\"SET_ROLES\",[]),Object(d.b)(),Object(m.b)(),t()}),async changeRoles({commit:e,dispatch:t},a){const n=a.join(\"\");e(\"SET_ROLES\",a),e(\"SET_TOKEN\",n),Object(d.c)(n),Object(m.b)();const o=await t(\"permission/generateRoutes\",a,{root:!0});m.a.addRoutes(o)}}};var p={namespaced:!0,state:{sidebar:{opened:!0},device:\"pc\",showSetting:!1,headerVal:!0},actions:{toggleSideBar({commit:e}){e(\"TOGGLE_SIDEBAR\")},setSiderBar({commit:e},t){e(\"SET_SIDEBAR\",t)},setDevice({commit:e},t){e(\"SET_DEVICE\",t)},setShowSetting({commit:e},t){e(\"SET_SHOWSETTING\",t)},setHeaderVal({commit:e},t){e(\"SET_HEADERVAL\",t)}},mutations:{TOGGLE_SIDEBAR:e=>{e.sidebar.opened=!e.sidebar.opened},SET_SIDEBAR:(e,t)=>{e.sidebar.opened=t},SET_DEVICE:(e,t)=>{e.device=t},SET_SHOWSETTING:(e,t)=>{e.showSetting=t},SET_HEADERVAL:(e,t)=>{e.headerVal=t}}};var u={sidebar:e=>e.app.sidebar,device:e=>e.app.device,headerVal:e=>e.app.headerVal,showSetting:e=>e.app.showSetting,token:e=>e.user.token,avatar:e=>e.user.avatar,name:e=>e.user.name,introduction:e=>e.user.introduction,roles:e=>e.user.roles,permission_routes:e=>e.permission.routes};n.default.use(o.a);const E=new o.a.Store({modules:{permission:c,user:l,app:p},getters:u});t.a=E},768:function(e,t,a){\"use strict\";a.r(t);var n=a(5),o=a(350),i=a(110),s=a.n(i),r=a(351),c=a.n(r),d=(a(730),a(733),a(734),a(908)),m=a.n(d),l=a(22),p=a(35),u=a(40),E=a(51),h=a.n(E);a(761);h.a.configure({showSpinner:!1});const S=[\"/login\"];p.a.beforeEach(async(e,t,a)=>{h.a.start(),document.title=e.meta.title||\"后台管理系统\";if(Object(u.a)())if(\"/login\"===e.path)a({path:\"/\"}),h.a.done();else{if(l.a.getters.roles&&l.a.getters.roles.length>0)a();else{try{const t=await l.a.dispatch(\"user/getInfo\"),n=await l.a.dispatch(\"permission/generateRoutes\",t);p.a.addRoutes(n),a({...e,replace:!0})}catch(t){await l.a.dispatch(\"user/resetToken\"),i.Message.error(t||\"Has Error\"),a(\"/login?redirect=\"+e.path),h.a.done()}a(),h.a.done()}}else-1!==S.indexOf(e.path)?a():(a(\"/login?redirect=\"+e.path),h.a.done())}),p.a.afterEach(()=>{h.a.done()});var T=a(361);n.default.component(\"svg-icon\",T.a);const g=a(763);var O;(O=g).keys().map(O);a(765);var _=a(364);n.default.use(s.a),n.default.prototype.$echarts=c.a,n.default.prototype.$axios=m.a,n.default.component(\"pagination\",_.a),n.default.config.productionTip=!1,new n.default({router:p.a,store:l.a,render:e=>e(o.default)}).$mount(\"#app\")}});","extractedComments":[]}